
---
aliases: [ "20230310162034",  ]
tags: SEC.101, SEC, PCPro
date_created: 2023-03-10 16:20
---
[[SEC.101 Index]]
# 8.4 - VPN
---
## 8.4.3 VPN Facts
This lesson covers:
- Virtual Private Networks
- VPN protocols

### Virtual Private Networks
A virtual private network is a type of network that uses encryption to securely send IP traffic over the TCP/IP network. A VPN is used primarily to support secure communications over an untrusted network.

- VPNs use a tunneling protocol that encrypts packet contents and wraps them in an unencrypted packet.
- Tunnel endpoints are devices that can encrypt and decrypt packets.
    -   When you create a VPN, you establish a security association between the two tunnel endpoints.
    -   The endpoints create a secure, virtual communication channel.
    -   Only the destination tunnel endpoint can unwrap packets and decrypt the packet contents.
- Routers use the unencrypted packet headers to deliver the packet to the destination device. Intermediate routers along the path cannot read the encrypted packet contents.
- You can use a VPN over a local area network, across a WAN connection, over the internet, and even over a dial-up connection.
- You can implement VPNs in the following ways:
    -   With a host-to-host VPN, two hosts establish a secure channel and communicate directly. In this configuration, both devices must be capable of creating the VPN connection.
    -   With a site-to-site VPN, routers on the edge of each site establish a VPN with the router at the other location. Data from hosts within the site are encrypted before being sent to the other site. With this configuration, individual hosts are unaware of the VPN.
    -   With a remote access VPN, a server on the edge of a network (called a VPN concentrator) is configured to accept VPN connections from individual hosts in a client-to-site configuration. Hosts that are allowed to connect using the VPN connection are granted access to resources on the VPN server or the private network.

### VPN Protocols
#### Point-to-Point Tunneling Protocol (PPTP)
PPTP was developed by Microsoft as one of the first VPN protocols. PPTP:
-   Uses standard authentication protocols, such as CHAP and PAP.
-   Supports only TCP/IP.
-   Is supported by most operating systems and servers.
-   Uses TCP port 1723.
#### Layer Two Tunneling Protocol (L2TP)
L2TP is an open standard for secure multiprotocol routing. L2TP:
-   Supports multiple protocols (not just IP).
-   Uses IPsec for encryption.
-   Is not supported by older operating systems.
-   Uses TCP port 1701 and UDP port 500.
#### Internet Protocol Security (IPsec)
IPsec provides authentication and encryption. You can use it in conjunction with L2TP or by itself as a VPN solution. IPsec includes the following three protocols for authentication, data encryption, and connection negotiation:
-   Authentication Header (AH) enables authentication with IPsec.
-   Encapsulating Security Payload (ESP) provides data encryption.
-   Internet Key Exchange (IKE) negotiates the connection.

IPsec can secure the following types of communications:
-   Host-to-host communications within a LAN.
-   VPN communications through the internet, either by itself or in conjunction with the L2TP VPN protocol.
#### Secure Sockets Layer (SSL)
The SSL protocol has long been used to secure traffic generated by IP protocols such as HTTP, FTP, and email. You can also use SSL as a VPN solution, typically in a remote access scenario. SSL:

-   Authenticates the server to the client using public key cryptography and digital certificates.
-   Encrypts the entire communication session.
-   Uses port 443, which is already open on most firewalls.
#### Generic Routing Encapsulation (GRE)
GRE is a tunneling protocol developed by Cisco. You can use GRE to route any Layer 3 protocol across an IP network. GRE:

-   Creates a tunnel between two routers.
-   Encapsulates packets by adding a GRE header and a new IP header to the original packet.
-   Does not offer any type of encryption.
-   Can be paired with other protocols, such as IPsec or PPTP, to create a secure VPN connection.

>[! tip] VPNs and Ports
>Ports must be open in firewalls to allow VPN protocols. For this reason, using SSL for the VPN often works through firewalls when other solutions do not. Additionally, some NAT solutions do not work well with VPN connections.

---
## 8.4.4 Configure a VPN Connection
**Problem**
![[SEC.101 8.4.4.png]]
**Solution**
![[SEC.101 8.4.4 Lab solution.png]]